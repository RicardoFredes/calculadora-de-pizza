<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Calculadora de Pizza</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="manifest" href="manifest.json" />
    <link rel="icon" href="icon-192x192.png" type="image/png" />
    <meta name="theme-color" content="#ffffff" />
    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker
          .register("/service-worker.js")
          .then(() => console.log("Service Worker registrado com sucesso"))
          .catch((error) =>
            console.log("Erro ao registrar Service Worker:", error)
          );
      }
    </script>
  </head>
  <body
    class="p-4 md:bg-gray-100 md:flex md:items-center md:justify-center md:min-h-screen"
  >
    <div class="bg-white md:shadow-lg rounded-lg md:p-6 md:w-96">
      <h1 class="text-xl font-bold mb-3 text-center">Calculadora de Pizza</h1>
      <div class="mb-3">
        <label for="numeroDePizzas" class="block font-medium"
          >Número de Pizzas</label
        >
        <input
          type="number"
          id="numeroDePizzas"
          class="w-full border border-gray-300 rounded p-2 text-lg"
          value="6"
          inputmode="numeric"
        />
      </div>
      <div class="mb-3">
        <label for="pesoDaMassa" class="block font-medium"
          >Peso da Massa por Pizza (g)</label
        >
        <input
          type="number"
          id="pesoDaMassa"
          class="w-full border border-gray-300 rounded p-2 text-lg"
          value="290"
          inputmode="numeric"
        />
      </div>
      <div class="mb-3">
        <label for="hidratacao" class="block font-medium">Hidratação (%)</label>
        <input
          type="number"
          id="hidratacao"
          class="w-full border border-gray-300 rounded p-2 text-lg"
          value="55"
          inputmode="numeric"
        />
      </div>
      <button
        id="calculaBtn"
        class="w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600 text-lg"
      >
        Calcular
      </button>
      <h4 class="mt-5 font-semibold">Ingredientes:</h4>
      <ul class="mt-2 space-y-1">
        <li class="border-t py-1">Farinha: <span id="farinha">0</span> g</li>
        <li class="border-t py-1">Água: <span id="agua">0</span> g</li>
        <li class="border-t py-1">Sal: <span id="sal">0</span> g</li>
        <li class="border-t py-1">Fermento: <span id="fermento">0</span> g</li>
        <li class="border-t py-1">Azeite: <span id="azeite">0</span> g</li>
        <li class="border-t py-1">Açúcar: <span id="acucar">0</span> g</li>
      </ul>
    </div>
    <script>
      const elementos = {
        farinha: document.getElementById("farinha"),
        agua: document.getElementById("agua"),
        sal: document.getElementById("sal"),
        fermento: document.getElementById("fermento"),
        azeite: document.getElementById("azeite"),
        acucar: document.getElementById("acucar"),
        numeroDePizzas: document.getElementById("numeroDePizzas"),
        pesoDaMassa: document.getElementById("pesoDaMassa"),
        hidratacao: document.getElementById("hidratacao"),
        calculaBtn: document.getElementById("calculaBtn"),
      };

      function calculaPesoFarinha(hidratacao, pesoTotal) {
        const solidos = pesoTotal / (1 + hidratacao / 100);
        return Math.round((solidos * 1000) / 1039);
      }

      const calculaPesoPercentual = (percentual, farinha) =>
        Math.round((farinha * percentual) / 100);

      function calculaPesos(hidratacao, numeroDePizzas, pesoDaMassa) {
        const pesoTotal = numeroDePizzas * pesoDaMassa;
        const pesofarinha = calculaPesoFarinha(hidratacao, pesoTotal);
        return {
          farinha: pesofarinha,
          agua:
            pesoTotal -
            pesofarinha -
            calculaPesoPercentual(2.5, pesofarinha) -
            calculaPesoPercentual(0.4, pesofarinha) -
            calculaPesoPercentual(3, pesofarinha) -
            calculaPesoPercentual(1, pesofarinha),
          sal: calculaPesoPercentual(2.5, pesofarinha),
          fermento: calculaPesoPercentual(0.4, pesofarinha),
          azeite: calculaPesoPercentual(3, pesofarinha),
          acucar: calculaPesoPercentual(1, pesofarinha),
        };
      }

      const renderizaValores = (pesos) => {
        for (const key in pesos) {
          elementos[key].textContent = pesos[key];
        }
      };

      function handleSubmit() {
        const pesos = calculaPesos(
          Number(elementos.hidratacao.value),
          Number(elementos.numeroDePizzas.value),
          Number(elementos.pesoDaMassa.value)
        );
        renderizaValores(pesos);
      }

      elementos.calculaBtn.addEventListener("click", handleSubmit);
      handleSubmit();
    </script>
  </body>
</html>
